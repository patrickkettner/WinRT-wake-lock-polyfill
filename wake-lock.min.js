if(window.Windows&&!("getWakeLock"in navigator)){var PatchedEventTarget=function(){};PatchedEventTarget.prototype=EventTarget.prototype;PatchedEventTarget.prototype.listeners=null;PatchedEventTarget.prototype.addEventListener=function(a,b){a in this._listeners||(this._listeners[a]=[]);this._listeners[a].push(b)};PatchedEventTarget.prototype.removeEventListener=function(a,b){if(a in this._listeners)for(var c=this._listeners[a],d=0,e=c.length;d<e;d++)if(c[d]===b){c.splice(d,1);break}};PatchedEventTarget.prototype.dispatchEvent=
function(a){if(!(a.type in this._listeners))return!0;var b=this._listeners[a.type];a.target=this;for(var c=0,d=b.length;c<d;c++)b[c].call(this,a);return!a.defaultPrevented};var WakeLock=function(a){var b=this;this._listeners={};this.onactivechange=this._display=null;this.active=!1;this.type=a;this.createRequest=function(){var a=new CustomEvent("activechange");console.log(b===this);b._display=new Windows.System.Display.DisplayRequest;b._display.requestActive();this.active=!0;if(this.onactivechange)this.onactivechange();
this.dispatchEvent(a);return{cancel:function(){var a=new CustomEvent("activechange");console.log(b===this);b._display.requestRelease();b.active=!1;if(b.onactivechange)b.onactivechange();b.dispatchEvent(a)}}}};WakeLock.prototype=PatchedEventTarget.prototype;window.navigator.getWakeLock=function(a){return new Promise(function(b,c){if(-1===["screen","system"].indexOf(a)){var d=new DOMException('"'+a+'" is not a valid wake-lock type',"WakeLockTypeNotSupported");return c(d)}if(window.top.location.origin!==
location.origin)return c();d=new WakeLock(a);document.documentElement.style.backgroundColor="blue";b(d)})}};
